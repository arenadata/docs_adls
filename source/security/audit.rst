Управление аудитом в Ranger
=============================

+ `Аудит. Введение`_
+ `Вкладка Access`_
+ `Вкладка Admin`_
+ `Вкладка ​Login Sessions`_
+ `Вкладка Plugins`_
+ `Вкладка ​Plugin Status`_



Аудит. Введение
-----------------------------------

**Apache Ranger** использует Apache Solr для хранения журналов аудита и обеспечивает поиск пользовательского интерфейса через них. Solr необходимо установить и настроить перед инсталляцией Ranger Admin. Конфигурация по умолчанию для Ranger Audits в Solr использует общий экземпляр Solr, предоставляемый бандлом ADPS. Solr – это и память, и процессор. Если продуктивная система имеет большой объем запросов доступа, необходимо убедиться, что хост Solr имеет достаточную память, процессор и дисковое пространство.

Для доступа к странице Аудита зайдите в основной интерфейс Apache Ranger и затем нажмите «Audit» в верхнем меню.

.. important:: При включении плагина Ranger необходимо перезапустить компонент



Вкладка Access
---------------

Предоставляет данные об активности пользоватей для всех политик. Политика службы по умолчанию настроена на регистрацию всех действий пользователей в рамках Сервисов. Эта политика по умолчанию не содержит правил доступа для пользователей и групп.

Вы можете фильтровать данные по следующим критериям:

.. csv-table:: Критерии фильтра
   :header: "Параметр", "Описание"
   :widths: 45, 45

   "Access Enforcer", "Ranger (ranger-acl) или Hadoop (hadoop-acl)"
   "Access Type",	"Тип попытки доступа пользователя (EG, REVOKE, GRANT, OPEN, USE)."
   "Client IP",	"IP-адрес пользовательской системы, которая пыталась получить доступ к ресурсу."
   "Result", "Показывает, была ли операция успешной..
   "Service Name", "Имя сервиса, к которой пытался получить доступ пользователь."
   "Service Type", "Тип службы, к которой пытался получить доступ пользователь."
   "Start Date, End Date", "Фильтрует результаты для определенного диапазона дат."
   "User", "Имя пользователя, который пытался получить доступ к ресурсу."
   "Cluster Name", "Название кластера"



Вкладка Admin
--------------

Вкладка «Admin» содержит все события для аудита веб-интерфейса администрирования безопасности ADH и ADS, включая службу, диспетчер служб, вход в систему и т. Д. (Такие действия, как создание, обновление, удаление, изменение пароля).

Вы можете фильтровать данные по следующим критериям:

.. csv-table:: Критерии фильтра
   :header: "Параметр", "Описание"
   :widths: 45, 45

   "Action, "Это операции, выполняемые над ресурсами (такие действия, как создание, обновление, удаление, смена пароля)."
   "Audit Type, "Существует три значения Resource, asset и xa user в соответствии с операциями, выполняемыми в Service, policy и users."
   "End Date, "	Время и дата входа в систему сохраняются для каждого сеанса. Диапазон дат используется для фильтрации результатов для этого конкретного диапазона дат."
   "Session ID, "Счетчик сеансов увеличивается каждый раз, когда вы пытаетесь войти в систему."
   "Start Date,	"Время и дата входа в систему сохраняются для каждого сеанса. Диапазон дат используется для фильтрации результатов для этого конкретного диапазона дат."
   "Start Date, "Имя пользователя, выполнившего операцию создания, обновления, удаления."



Вкладка Login Sessions
-----------------------

На вкладке «Login Sessions» регистрируется информация, относящаяся к сеансам пользователй для каждого входа в систему.

Вы можете фильтровать данные по следующим критериям:

.. csv-table:: Критерии фильтра
   :header: "Параметр", "Описание"
   :widths: 45, 45

   "Login ID", "Имя пользователя, под которым кто-то входит в систему."
   "Session-id", "Счетчик сеансов увеличивается каждый раз, когда пользователь пытается войти в систему."
   "Start Date", End Date, "Указывает, что результаты должны фильтроваться на основе определенной даты начала и даты окончания."
   "Тип входа", "Режим, в котором пользователь пытается войти в систему (вводя имя пользователя и пароль)."
   "IP", "IP-адрес системы, через которую пользователь вошел в систему."
   "User Agent", "Версия браузера или библиотеки, используемая для входа в систему для определенного события (например, Mozilla, Java, Python)"
   "Result", "Регистрирует, был ли вход в систему успешным. Возможные результаты: «Успех», «Неверный пароль», «Учетная запись отключена», «Заблокирована», «Срок действия пароля истек» или «Пользователь не найден»."



Вкладка Login Sessions
-----------------------

На вкладке «Login Sessions» регистрируется информация, относящаяся к сеансам пользователй для каждого входа в систему.

Вы можете фильтровать данные по следующим критериям:

.. csv-table:: Критерии фильтра
   :header: "Параметр", "Описание"
   :widths: 45, 45

   "Login ID", "Имя пользователя, под которым кто-то входит в систему."
   "Session-id", "Счетчик сеансов увеличивается каждый раз, когда пользователь пытается войти в систему."
   "Start Date", End Date, "Указывает, что результаты должны фильтроваться на основе определенной даты начала и даты окончания."
   "Тип входа", "Режим, в котором пользователь пытается войти в систему (вводя имя пользователя и пароль)."
   "IP", "IP-адрес системы, через которую пользователь вошел в систему."
   "User Agent", "Версия браузера или библиотеки, используемая для входа в систему для определенного события (например, Mozilla, Java, Python)"
   "Result", "Регистрирует, был ли вход в систему успешным. Возможные результаты: «Успех», «Неверный пароль», «Учетная запись отключена», «Заблокирована», «Срок действия пароля истек» или «Пользователь не найден»."



Вкладка Plugins
-----------------

На этой вкладке отображается история и статусы Security Agent. В этом модуле отображаются все службы, экспортированные из системы.

Вы можете фильтровать данные по следующим критериям:

.. csv-table:: Критерии фильтра
   :header: "Параметр", "Описание"
   :widths: 45, 45

   "Plugin IP", "IP-адрес агента, который пытался экспортировать службу."
   "Plugin ID", "Имя агента, который пытался экспортировать службу."
   "HTTP Response Code", "Код HTTP вернулся при попытке экспорта службы."
   "Start Date, End Date", "Время и дата экспорта сохраняются для каждого агента. Диапазон дат используется для фильтрации результатов для этого конкретного диапазона дат."
   "Service Name", "Имя службы, которую мы пытаемся экспортировать."
   "Cluster Name", "Название кластера."



Вкладка ​Plugin Status
----------------------

На этой вкладке показаны политики, действующие для каждого плагина. Включает соответствующую информацию о хосте, а также о том, когда плагин загружен и начал применять политики.

.. csv-table:: Критерии фильтра
   :header: "Параметр", "Описание"
   :widths: 45, 45

   "Host Name", "Хост, например c6401.ambari.apache.org."
   "Plugin IP", "IP-адрес агента, использующего плагин."
   "Service Name", "Имя службы, содержащей политики, например, ADH_yarn."
   "Service Type", "Компонент"
